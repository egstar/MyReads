(this["webpackJsonpmyreads-burham-soliman"]=this["webpackJsonpmyreads-burham-soliman"]||[]).push([[0],{26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n(21),c=n.n(s),a=(n(26),n(9)),r=n(3),i=n(4),l=n(6),h="https://reactnd-books-api.udacity.com",u=localStorage.token;u||(u=localStorage.token=Math.random().toString(36).substr(-8));var j={Accept:"application/json",Authorization:u},d=function(){return fetch("".concat(h,"/books"),{headers:j}).then((function(e){return e.json()})).then((function(e){return e.books}))},b=n(2),f=function(e){var t=e.book,n=e.shelf,s=e.setBooks,c=e.Books,a=Object(o.useState)(n),r=Object(i.a)(a,2),u=r[0],f=r[1],m=[{shelfname:"currentlyReading",title:"Currently Reading"},{shelfname:"wantToRead",title:"Want to Read"},{shelfname:"read",title:"Read"},{shelfname:"none",title:"None"}];return Object(b.jsxs)("select",{defaultValue:u,onChange:function(e){var n=e.target.value;f(n),function(e,t){fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(l.a)(Object(l.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,n),d().then((function(e){c!==e&&s(e)}))},children:[Object(b.jsxs)("option",{style:{background:"orange",fontWeight:"bold",color:"white",border:"2px solid red"},value:t.shelf,disabled:!0,children:["Move from [ ",m.filter((function(e){return e.shelfname===u})).map((function(e){return e.title}))," ]"]}),void 0!==n?m.filter((function(e){return e.shelfname!==n})).map((function(e){var t=e.shelfname,n=e.title;return Object(b.jsx)("option",{value:t,children:n},t)})):m.filter((function(e){return"none"!==e.shelfname})).map((function(e){var t=e.shelfname,n=e.title;return Object(b.jsx)("option",{value:t,children:n},t)}))]})},m=function(e){var t=e.book,n=e.shelf,o=e.setBooks,s=e.Books;return Object(b.jsxs)("li",{className:"listedBook",children:[Object(b.jsx)("span",{className:"tooltip-text",children:t.title}),Object(b.jsxs)("div",{className:"book",children:[Object(b.jsxs)("div",{className:"book-top",children:[Object(b.jsx)("div",{className:"book-cover",style:{width:"100%",height:193,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):"url(https://dummyimage.com/128x193/ff4000/fcfc7e.png&text=".concat(t.title.split(" ").join("+"),")")}}),Object(b.jsx)("div",{className:"book-shelf-changer",children:Object(b.jsx)(f,{book:t,shelf:n,setBooks:function(){return o},Books:s},t.id)})]}),Object(b.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.length>0?Object(b.jsx)("div",{className:"author-name",children:t.authors[t.authors.length-1]},t.title+t.authors[0]):Object(b.jsx)("div",{className:"author-name",children:"unknown"},t.title+"unknown")})]})]},t.id)},O=function(e){var t=e.Shelf,n=Object(o.useState)([]),s=Object(i.a)(n,2),c=s[0],a=s[1];return Object(o.useEffect)((function(){var e=!0;return d().then((function(t){e&&t!==c&&a(t)})),function(){return e=!1}}),[c]),Object(b.jsxs)("div",{className:"bookshelf",children:[Object(b.jsx)("h2",{className:"bookshelf-title",children:[{shelfname:"currentlyReading",title:"Currently Reading"},{shelfname:"wantToRead",title:"Want to Read"},{shelfname:"read",title:"Read"},{shelfname:"none",title:"None"}].filter((function(e){return e.shelfname===t})).map((function(e){return e.title}))}),Object(b.jsx)("div",{className:"bookshelf-books",children:Object(b.jsx)("ol",{className:"books-grid",children:c.filter((function(e){return e.shelf===t})).length>0?c.filter((function(e){return e.shelf===t})).map((function(e){return Object(b.jsx)(m,{book:e,shelf:e.shelf,Books:c,setBooks:a},e.id)})):Object(b.jsxs)("h3",{children:[Object(b.jsx)("span",{style:{color:"red",textDecoration:"underline"},children:c.filter((function(e){return e.shelf===t})).length})," Books found in this shelf."]})})})]},t)},k=function(){return Object(b.jsxs)("div",{className:"list-books",children:[Object(b.jsx)("div",{className:"list-books-title",children:Object(b.jsx)("h1",{children:"MyReads"})}),Object(b.jsx)("div",{className:"list-books-content",children:Object(b.jsx)("div",{children:["currentlyReading","wantToRead","read"].map((function(e){return Object(b.jsx)(O,{Shelf:e},e)}))})}),Object(b.jsx)("div",{className:"open-search",children:Object(b.jsx)(a.b,{to:"/search/",children:"Add a book"})})]})},x=function(){var e,t=Object(o.useState)(""),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(o.useState)([{currentBooks:[],matchedBooks:[]}]),u=Object(i.a)(r,2),f=u[0],O=u[1];Object(o.useEffect)((function(){f.currentBooks&&f.currentBooks.length<=0&&d().then((function(e){O(Object(l.a)(Object(l.a)({},f),{},{currentBooks:[e]}))}))}),[f]);return Object(b.jsxs)("div",{className:"search-books",children:[Object(b.jsxs)("div",{className:"search-books-bar",children:[Object(b.jsx)(a.b,{to:"/",className:"close-search",children:"Close"}),Object(b.jsx)("div",{className:"search-books-input-wrapper",children:Object(b.jsx)("input",{type:"text",placeholder:"Type Book name here",value:s,onChange:function(t){var n,o;c(t.target.value.toLowerCase().toString()),s&&""!==t.target.value?(n=s.toLowerCase().toString().trim(),o=30,fetch("".concat(h,"/search"),{method:"POST",headers:Object(l.a)(Object(l.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:n,maxResults:o})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(t){(e=t.length>0?t.filter((function(e){return e.title.toLowerCase().includes(s)})):[]).length>0?O(Object(l.a)(Object(l.a)({},f),{},{matchedBooks:e})):O(Object(l.a)(Object(l.a)({},f),{},{matchedBooks:[]}))})):O([])}})})]}),s.length>0&&f.matchedBooks?Object(b.jsxs)("div",{className:"searchbar-tip",children:[Object(b.jsxs)("span",{style:{color:f.matchedBooks.length>0?"green":"maroon",textDecoration:"underline",margin:"0px 5px"},children:[f.matchedBooks.length," "]})," Books has been found."]}):Object(b.jsx)(b.Fragment,{}),Object(b.jsx)("div",{className:"search-books-results",children:Object(b.jsx)("ol",{className:"books-grid",children:f.matchedBooks&&f.matchedBooks.length>0?f.matchedBooks.map((function(e){return Object(b.jsx)(m,{book:e,shelf:e.shelf},e.id)})):Object(b.jsx)(b.Fragment,{})})})]})},p=(n(28),function(){return Object(b.jsx)(r.a,{})}),g=function(){return Object(b.jsx)(a.a,{children:Object(b.jsx)(r.d,{children:Object(b.jsxs)(r.b,{path:"/",element:Object(b.jsx)(p,{}),children:[Object(b.jsx)(r.b,{index:!0,element:Object(b.jsx)(k,{})}),Object(b.jsx)(r.b,{path:"/search",element:Object(b.jsx)(x,{})})]})})})};c.a.render(Object(b.jsx)(g,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.c86844fb.chunk.js.map