(this["webpackJsonpmyreads-burham-soliman"]=this["webpackJsonpmyreads-burham-soliman"]||[]).push([[0],{31:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n(25),c=n.n(s),r=(n(31),n(4)),a=n(9),i=n(3),l=n(6),u="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var h={Accept:"application/json",Authorization:d},b=function(){return fetch("".concat(u,"/books"),{headers:h}).then((function(e){return e.json()})).then((function(e){return e.books}))},j=n(20),f=n.n(j),m=n(2),k=f.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:5e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",f.a.stopTimer),e.addEventListener("mouseleave",f.a.resumeTimer)}}),O=function(e){var t=e.book,n=e.Shelf,s=e.setBooks,c=e.books,a=e.shelves,i=e.setMounted,d=e.Mounted,j=Object(o.useState)(n),f=Object(r.a)(j,2),O=f[0],x=f[1];return Object(m.jsxs)("select",{defaultValue:n,onChange:function(e){var o=e.target.value;x(o),t.shelf=o,n!==o?k.fire({title:"Success",icon:"success",html:"".concat(t.title," has been moved from <i> ").concat(n," </i> to <sup> ").concat(o," </sup>"),showConfirmButton:!1,timer:1500}):k.fire({title:"Error",icon:"error",html:"".concat(t.title," is currently on ").concat(o," shelf")}),s((function(e){return e.filter((function(e){return e.id!==t.id})).concat([t])})),function(e,t){return fetch("".concat(u,"/books/").concat(e.id),{method:"PUT",headers:Object(l.a)(Object(l.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,o).then((function(){b().then((function(e){c!==e&&(s(e),i(!d))}))}))},children:[Object(m.jsxs)("option",{style:{background:"orange",fontWeight:"bold",color:"white",border:"2px solid red"},value:n,disabled:!0,children:["Move from [ ",a&&a.filter((function(e){return e.name===O})).map((function(e){var t=e.title;return t||"none"}))," ]"]}),void 0!==n?a&&a.filter((function(e){return e.name!==n})).map((function(e){var t=e.name,n=e.title;return Object(m.jsx)("option",{value:t,children:n},t)})):a&&a.filter((function(e){return"none"!==e.name})).map((function(e){var t=e.name,n=e.title;return Object(m.jsx)("option",{value:t,children:n},t)}))]})},x=function(e){var t=e.book,n=e.setBooks,o=e.books,s=e.shelves,c=e.setMounted,r=e.Mounted;return Object(m.jsxs)("li",{className:"listedBook",children:[Object(m.jsx)("span",{className:"tooltip-text",children:t.title}),Object(m.jsxs)("div",{className:"book",children:[Object(m.jsxs)("div",{className:"book-top",children:[Object(m.jsx)("div",{className:"book-cover",style:{width:"100%",height:193,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):"url(https://dummyimage.com/128x193/ff4000/fcfc7e.png&text=".concat(t.title.split(" ").join("+"),")")}}),Object(m.jsx)("div",{className:"book-shelf-changer",children:Object(m.jsx)(O,{book:t,books:o,Shelf:t.shelf?t.shelf:o.filter((function(e){return e.id===t.id})).length>0?o.filter((function(e){return e.id===t.id})).map((function(e){return e.shelf})).toString():"none",shelves:s,setBooks:n,setMounted:c,Mounted:r},t.id)})]}),Object(m.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.length>0?Object(m.jsx)("div",{className:"author-name",children:t.authors[t.authors.length-1]},t.title+t.authors[0]):Object(m.jsx)("div",{className:"author-name",children:"unknown"},t.title+"unknown")})]})]},t.id)},v=function(e){var t=e.Shelf,n=e.shelves,o=e.books,s=e.setBooks,c=e.setMounted,r=e.Mounted;return Object(m.jsxs)("div",{className:"bookshelf",children:[Object(m.jsx)("h2",{className:"bookshelf-title",children:n.filter((function(e){return e.name===t.name})).map((function(e){return e.title}))}),Object(m.jsx)("div",{className:"bookshelf-books",children:Object(m.jsx)("ol",{className:"books-grid",children:o.filter((function(e){return e.shelf===t.name})).length>0?o.filter((function(e){return e.shelf===t.name})).map((function(e){return Object(m.jsx)(x,{book:e,Shelf:e.shelf,books:o,setBooks:s,shelves:n,setMounted:c,Mounted:r},e.id)})):Object(m.jsxs)("h3",{children:[Object(m.jsx)("span",{style:{color:"red",textDecoration:"underline"},children:o.filter((function(e){return e.shelf===t.name})).length})," Books found in this shelf."]})})})]},t)},p=function(e){var t=e.Mounted,n=e.setMounted,o=e.books,s=e.shelves,c=e.setBooks;return Object(m.jsxs)("div",{className:"list-books",children:[Object(m.jsx)("div",{className:"list-books-title",children:Object(m.jsx)("h1",{children:"MyReads"})}),Object(m.jsx)("div",{className:"list-books-content",children:Object(m.jsx)("div",{children:s.filter((function(e){return"none"!==e.name})).map((function(e){return Object(m.jsx)(v,{Mounted:t,setMounted:n,books:o,shelves:s,Shelf:e,setBooks:c},e.name)}))})}),Object(m.jsx)("div",{className:"open-search",children:Object(m.jsx)(a.b,{to:"/search",children:"Add a book"})})]})},g=function(e){var t=e.shelves,n=e.books,o=e.setBooks,s=e.setMounted,c=e.Mounted;return Object(m.jsx)(p,{Mounted:c,setMounted:s,books:n,shelves:t,setBooks:o})},B=n(26),M=function(e){var t=e.searchQuery,n=e.SearchQuery,o=e.BooksList,s=e.shelves,c=e.setBooks,r=e.books,i=e.setMounted,l=e.Mounted;return Object(m.jsxs)("div",{className:"search-books",children:[Object(m.jsxs)("div",{className:"search-books-bar",children:[Object(m.jsx)(a.b,{to:"/",className:"close-search",children:"Close"}),Object(m.jsx)("div",{className:"search-books-input-wrapper",children:Object(m.jsx)(B.DebounceInput,{minLength:2,debounceTimeout:250,element:"input",type:"text",placeholder:"Type Book name here",onChange:n})})]}),t.length>0&&o.matchedBooks?Object(m.jsxs)("div",{className:"searchbar-tip",children:[Object(m.jsxs)("span",{style:{color:o.matchedBooks.length>0?"green":"maroon",textDecoration:"underline",margin:"0px 5px"},children:[o.matchedBooks.length," "]})," Books has been found."]}):Object(m.jsx)(m.Fragment,{}),Object(m.jsx)("div",{className:"search-books-results",children:Object(m.jsx)("ol",{className:"books-grid",children:o.matchedBooks&&o.matchedBooks.length>0?o.currentBooks&&o.currentBooks.length>0&&o.currentBooks.includes({id:o.matchedBooks.map((function(e){return e.id}))})?o.currentBooks.map((function(e){return Object(m.jsx)(x,{book:e,Shelf:e.shelf,shelves:s,setBooks:c,books:r,setMounted:i,Mounted:l},e.id)})):o.matchedBooks.map((function(e){return Object(m.jsx)(x,{book:e,Shelf:"none",shelves:s,setBooks:c,books:r,setMounted:i,Mounted:l},e.id)})):Object(m.jsx)(m.Fragment,{})})})]})},N=function(e){var t,n=e.books,s=e.setBooks,c=e.setMounted,a=e.shelves,i=e.Mounted,d=Object(o.useState)(""),j=Object(r.a)(d,2),f=j[0],k=j[1],O=Object(o.useState)([{currentBooks:[n],matchedBooks:[]}]),x=Object(r.a)(O,2),v=x[0],p=x[1];Object(o.useEffect)((function(){v.currentBooks&&v.currentBooks.length<=0&&b().then((function(e){p(Object(l.a)(Object(l.a)({},v),{},{currentBooks:[e]}))}))}),[v]);return Object(m.jsx)(M,{searchQuery:f,SearchQuery:function(e){var n,o;k(e.target.value.toLowerCase().toString()),f&&""!==e.target.value?(n=f.toLowerCase().toString().trim(),o=30,fetch("".concat(u,"/search"),{method:"POST",headers:Object(l.a)(Object(l.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:n,maxResults:o})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){(t=e.length>0?e.filter((function(e){return e.title.toLowerCase().includes(f)})):[]).length>0?p(Object(l.a)(Object(l.a)({},v),{},{matchedBooks:t})):p(Object(l.a)(Object(l.a)({},v),{},{matchedBooks:[]}))})):p([])},BooksList:v,shelves:a,setBooks:s,books:n,setMounted:c,Mounted:i})},y=(n(46),function(){return Object(m.jsx)(i.a,{})}),S=function(){var e=[{name:"currentlyReading",title:"Currently Reading"},{name:"wantToRead",title:"Want to Read"},{name:"read",title:"Read"},{name:"none",title:"None"}],t=Object(o.useState)([]),n=Object(r.a)(t,2),s=n[0],c=n[1],l=Object(o.useState)(!1),u=Object(r.a)(l,2),d=u[0],h=u[1];return window.onload=function(){h(!0)},Object(o.useEffect)((function(){return!0===d&&b().then((function(e){e!==s&&c(e)})),function(){return h(!1)}}),[d,s]),Object(m.jsx)(a.a,{children:Object(m.jsx)(i.d,{children:Object(m.jsxs)(i.b,{path:"/",element:Object(m.jsx)(y,{}),children:[Object(m.jsx)(i.b,{index:!0,element:Object(m.jsx)(g,{books:s,setBooks:c,setMounted:h,Mounted:d,shelves:e})}),Object(m.jsx)(i.b,{path:"/search",element:Object(m.jsx)(N,{books:s,setBooks:c,setMounted:h,Mounted:d,shelves:e})})]})})})};c.a.render(Object(m.jsx)(S,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.83839f9b.chunk.js.map