(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(8),c=n.n(a),o=n(9),r=(n(14),n(2)),i=(n(15),n(6)),l="https://reactnd-books-api.udacity.com",h=localStorage.token;h||(h=localStorage.token=Math.random().toString(36).substr(-8));var j={Accept:"application/json",Authorization:h},d=n(1),u=function(e){var t=e.book,n=e.shelf,a=e.onBooksUpdate,c=Object(s.useState)(""),o=Object(r.a)(c,2),h=o[0],u=o[1],b=[{shelfname:"currentlyReading",title:"Currently Reading"},{shelfname:"wantToRead",title:"Want to Read"},{shelfname:"read",title:"Read"},{shelfname:"none",title:"None"}],f=Object(s.useCallback)((function(e){a(e)}),[a]);return Object(d.jsxs)("select",{value:h,onChange:function(e){var n,s=e.target.value;u(s),function(e,t){return fetch("".concat(l,"/books/").concat(e.id),{method:"PUT",headers:Object(i.a)(Object(i.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,s).then((function(e){n=e})),f(n)},children:[Object(d.jsx)("option",{value:"",disabled:!0,children:"Move to..."}),void 0!==n?b.filter((function(e){return e.shelfname!==n})).map((function(e){var t=e.shelfname,n=e.title;return Object(d.jsx)("option",{value:t,children:n},t)})):b.filter((function(e){return"none"!==e.shelfname})).map((function(e){var t=e.shelfname,n=e.title;return Object(d.jsx)("option",{value:t,children:n},t)}))]})},b=function(e){var t=e.book;e.Shelf;return Object(d.jsxs)("li",{className:"listedBook",children:[Object(d.jsx)("span",{className:"tooltip-text",children:t.title}),Object(d.jsxs)("div",{className:"book",children:[Object(d.jsxs)("div",{className:"book-top",children:[Object(d.jsx)("div",{className:"book-cover",style:{width:"100%",height:193,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):"url(https://dummyimage.com/128x193/ff4000/fcfc7e.png&text=".concat(t.title.split(" ").join("+"),")")}}),Object(d.jsx)("div",{className:"book-shelf-changer",children:Object(d.jsx)(u,{book:t,shelf:t.shelf},t.id)})]}),Object(d.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.length>0?Object(d.jsx)("div",{className:"author-name",children:t.authors[t.authors.length-1]},t.title+t.authors[0]):Object(d.jsx)("div",{className:"author-name",children:"unknown"},t.title+"unknown")})]})]},t.id)},f=function(e){var t=e.setShowSearchpage,n=Object(s.useState)(""),a=Object(r.a)(n,2),c=a[0],o=a[1],h=Object(s.useState)([]),u=Object(r.a)(h,2),f=u[0],m=u[1];return Object(d.jsxs)("div",{className:"search-books",children:[Object(d.jsxs)("div",{className:"search-books-bar",children:[Object(d.jsx)("a",{className:"close-search",href:"#close",onClick:function(){return t(!1)},children:"Close"}),Object(d.jsx)("div",{className:"search-books-input-wrapper",children:Object(d.jsx)("input",{type:"text",placeholder:"Type (book name / author name)",value:c,onChange:function(e){var t,n;o(e.target.value.toLowerCase().toString().trim()),c&&""!==e.target.value?(t=c.toLowerCase().toString().trim(),n=30,fetch("".concat(l,"/search"),{method:"POST",headers:Object(i.a)(Object(i.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:t,maxResults:n})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){e.length>0?m(e):m([])})):m([])}})})]}),c.length>0?Object(d.jsxs)("div",{className:"searchbar-tip",children:[Object(d.jsxs)("span",{style:{color:f.length>0?"green":"red",textDecoration:"underline",margin:"0px 5px"},children:[f.length," "]})," Books has been found."]}):Object(d.jsx)(d.Fragment,{}),Object(d.jsx)("div",{className:"search-books-results",children:Object(d.jsx)("ol",{className:"books-grid",children:f.length>0?f.map((function(e){return Object(d.jsx)(b,{book:e},e.id)})):Object(d.jsx)(d.Fragment,{})})})]})},m=function(e){var t=e.Shelf,n=Object(s.useState)([]),a=Object(r.a)(n,2),c=a[0],o=a[1];return Object(s.useEffect)((function(){fetch("".concat(l,"/books"),{headers:j}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){o(e)}))}),[c]),Object(d.jsxs)("div",{className:"bookshelf",children:[Object(d.jsx)("h2",{className:"bookshelf-title",children:[{shelfname:"currentlyReading",title:"Currently Reading"},{shelfname:"wantToRead",title:"Want to Read"},{shelfname:"read",title:"Read"},{shelfname:"none",title:"None"}].filter((function(e){return e.shelfname===t})).map((function(e){return e.title}))}),Object(d.jsx)("div",{className:"bookshelf-books",children:Object(d.jsx)("ol",{className:"books-grid",children:c.filter((function(e){return e.shelf===t})).length>0?c.filter((function(e){return e.shelf===t})).map((function(e){return Object(d.jsx)(b,{book:e},e.id)})):Object(d.jsxs)("h3",{children:[Object(d.jsx)("span",{style:{color:"red",textDecoration:"underline"},children:c.filter((function(e){return e.shelf===t})).length})," Books found in this shelf."]})})})]},t)},O=function(e){var t=e.setShowSearchpage;return Object(d.jsxs)("div",{className:"list-books",children:[Object(d.jsx)("div",{className:"list-books-title",children:Object(d.jsx)("h1",{children:"MyReads"})}),Object(d.jsx)("div",{className:"list-books-content",children:Object(d.jsx)("div",{children:["currentlyReading","wantToRead","read"].map((function(e){return Object(d.jsx)(m,{Shelf:e},e)}))})}),Object(d.jsx)("div",{className:"open-search",children:Object(d.jsx)("a",{href:"#add",onClick:function(){t(!0)},children:"Add a book"})})]})};var x=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(d.jsx)("div",{className:"app",children:n?Object(d.jsx)(f,{setShowSearchpage:a}):Object(d.jsx)(O,{setShowSearchpage:a})})};c.a.render(Object(d.jsx)(o.a,{children:Object(d.jsx)(x,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.a7c03f1f.chunk.js.map