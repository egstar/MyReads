(this["webpackJsonpmyreads-burham-soliman"]=this["webpackJsonpmyreads-burham-soliman"]||[]).push([[0],{39:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var o=n(0),s=n(29),c=n.n(s),r=(n(39),n(4)),a=n(10),i=n(3),l=n(15),u=n.n(l),d=n(6),h="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var j={Accept:"application/json",Authorization:b},f=function(){return fetch("".concat(h,"/books"),{headers:j}).then((function(e){return e.json()})).then((function(e){return e.books}))},k=n(2),m=u.a.mixin({showConfirmButton:!1,timer:5e3,background:"linear-gradient(rgb(243, 191, 148),rgb(243, 221, 174),rgb(243, 191, 148))",timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",u.a.stopTimer),e.addEventListener("mouseleave",u.a.resumeTimer)}}),v=function(e){var t=e.book,n=e.Shelf,s=e.setBooks,c=e.books,a=e.shelves,i=e.setMounted,l=e.Mounted,u=Object(o.useState)(n),b=Object(r.a)(u,2),v=b[0],p=b[1];return Object(k.jsxs)("select",{defaultValue:n,onChange:function(e){var o=e.target.value;p(o),t.shelf=o,n!==o?m.fire({title:"Success",icon:"success",html:'<div class="toast-book-title">'.concat(t.title,'</div> has been moved to <span class="toast-shelf"> ').concat(a.filter((function(e){return e.name===o})).map((function(e){return e.title}))," </span> shelf."),showConfirmButton:!1,timer:1500}):m.fire({title:"Error",icon:"error",html:"".concat(t.title," is currently on ").concat(o," shelf")}),s((function(e){return e.filter((function(e){return e.id!==t.id})).concat([t])})),function(e,t){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)(Object(d.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,o).then((function(){f().then((function(e){c!==e&&(s(e),i(!l))}))}))},children:[Object(k.jsxs)("option",{style:{background:"orange",fontWeight:"bold",color:"white",border:"2px solid red"},value:n,disabled:!0,children:["Move from [ ",a&&a.filter((function(e){return e.name===v})).map((function(e){var t=e.title;return t||"none"}))," ]"]}),void 0!==n?a&&a.filter((function(e){return e.name!==n})).map((function(e){var t=e.name,n=e.title;return Object(k.jsx)("option",{value:t,children:n},t)})):a&&a.filter((function(e){return"none"!==e.name})).map((function(e){var t=e.name,n=e.title;return Object(k.jsx)("option",{value:t,children:n},t)}))]})},p=function(e){var t=e.book,n=e.setBooks,o=e.books,s=e.shelves,c=e.setMounted,r=e.Mounted,a=e.BookView;return Object(k.jsxs)("li",{className:"listedBook",children:[Object(k.jsx)("span",{className:"tooltip-text",children:t.title}),Object(k.jsxs)("div",{className:"book",children:[Object(k.jsxs)("div",{className:"book-top",children:[Object(k.jsx)("div",{className:"book-cover",onClick:function(){return a(t)},style:{width:"100%",height:193,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):"url(https://dummyimage.com/128x193/ff4000/fcfc7e.png&text=".concat(t.title.split(" ").join("+"),")")}}),Object(k.jsx)("div",{className:"book-shelf-changer",children:Object(k.jsx)(v,{book:t,books:o,Shelf:t.shelf?t.shelf:o.filter((function(e){return e.id===t.id})).length>0?o.filter((function(e){return e.id===t.id})).map((function(e){return e.shelf})).toString():"none",shelves:s,setBooks:n,setMounted:c,Mounted:r},t.id)})]}),Object(k.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.length>0?Object(k.jsx)("div",{className:"author-name",children:t.authors[t.authors.length-1]},t.title+t.authors[0]):Object(k.jsx)("div",{className:"author-name",children:"Unknown"},t.title+"Unknown")})]})]},t.id)},O=function(e){var t=e.book,n=e.setBooks,o=e.books,s=e.shelves,c=e.setMounted,r=e.Mounted,a=t.imageLinks?t.imageLinks.thumbnail:"https://dummyimage.com/128x193/ff4000/fcfc7e.png&text=".concat(t.title.split(" ").join("+"));return Object(k.jsx)(p,{BookView:function(e){u.a.mixin({showCloseButton:!0,closeButtonHtml:'<span class="book-view-close">&times;</span>',background:"linear-gradient(rgb(243, 191, 148),rgb(243, 221, 174),rgb(243, 191, 148))",html:'<div class="book-view-grid">\n                    <div class="book-view-pic">\n                        <img class="book-displied-pic" src='.concat(a," alt=").concat(e.title,' />\n                    </div>\n                    <span class="book-view-booklink"><a href=').concat(e.previewLink,' target="_blank">Preview</a></span>\n                    <div class="book-view-pages">Number of pages: <span class="book-view-pagecount">').concat(e.pageCount,'</span></div>\n                    <hr style="opacity:0.1;">\n                    <div class="book-view-desc">Description</div>\n                    <div class="book-view-descval">').concat(e.description,'</div>\n                    <hr style="opacity:0.1;">\n                    <div class="book-view-authors">Authors: \n                        <span class="book-view-authval">').concat(e.authors?e.authors.map((function(e){return'<h5 style="width:max-content;display:inline">'+e+"</h5>"})).toString().replaceAll(",","  "):"Unknown","</span>\n                    </div>\n                    \n                    \n                    \n                </div>"),showConfirmButton:!1}).fire({title:"".concat(e.title)})},book:t,setBooks:n,books:o,shelves:s,setMounted:c,Mounted:r})},g=n(34),x=function(e){var t=e.Shelf,n=e.shelves,o=e.books,s=e.setBooks,c=e.setMounted,r=e.Mounted;return Object(k.jsxs)("div",{className:"bookshelf",children:[Object(k.jsx)("h2",{className:"bookshelf-title",children:n.filter((function(e){return e.name===t.name})).map((function(e){return e.title}))}),Object(k.jsx)("div",{className:"bookshelf-books",children:Object(k.jsx)("ol",{className:"books-grid",children:o.filter((function(e){return e.shelf===t.name})).length>0?o.filter((function(e){return e.shelf===t.name})).map((function(e){return Object(k.jsx)(O,{book:e,Shelf:e.shelf,books:o,setBooks:s,shelves:n,setMounted:c,Mounted:r},e.id)})):o.length>0?Object(k.jsxs)("h3",{children:[Object(k.jsx)("span",{style:{color:"red",textDecoration:"underline"},children:o.filter((function(e){return e.shelf===t.name})).length})," Books found in this shelf."]}):Object(k.jsx)(g.a,{visible:!0,height:"80",width:"80",ariaLabel:"blocks-loading",wrapperStyle:{},wrapperClass:"blocks-wrapper",colors:["#e15b64","#f47e60","#f8b26a","#abbd81","#849b87"]})})})]},t)},B=function(e){var t=e.Mounted,n=e.setMounted,o=e.books,s=e.shelves,c=e.setBooks;return Object(k.jsxs)("div",{className:"list-books",children:[Object(k.jsx)("div",{className:"list-books-title",children:Object(k.jsx)("h1",{children:"MyReads"})}),Object(k.jsx)("div",{className:"list-books-content",children:Object(k.jsx)("div",{children:s.filter((function(e){return"none"!==e.name})).map((function(e){return Object(k.jsx)(x,{Mounted:t,setMounted:n,books:o,shelves:s,Shelf:e,setBooks:c},e.name)}))})}),Object(k.jsx)("div",{className:"open-search",children:Object(k.jsx)(a.b,{to:"/search",children:"Add a book"})})]})},M=function(e){var t=e.shelves,n=e.books,o=e.setBooks,s=e.setMounted,c=e.Mounted;return Object(k.jsx)(B,{Mounted:c,setMounted:s,books:n,shelves:t,setBooks:o})},w=n(33),y=function(e){var t=e.searchQuery,n=e.SearchQuery,o=e.BooksList,s=e.shelves,c=e.setBooks,r=e.books,i=e.setMounted,l=e.Mounted;return Object(k.jsxs)("div",{className:"search-books",children:[Object(k.jsxs)("div",{className:"search-books-bar",children:[Object(k.jsx)(a.b,{to:"/",className:"close-search",children:"Close"}),Object(k.jsx)("div",{className:"search-books-input-wrapper",children:Object(k.jsx)(w.DebounceInput,{minLength:2,debounceTimeout:250,element:"input",type:"text",placeholder:"Type Book name here",onChange:n})})]}),t.length>0&&o.matchedBooks?Object(k.jsxs)("div",{className:"searchbar-tip",children:[Object(k.jsxs)("span",{style:{color:o.matchedBooks.length>0?"green":"maroon",textDecoration:"underline",margin:"0px 5px"},children:[o.matchedBooks.length," "]})," Books has been found."]}):Object(k.jsx)(k.Fragment,{}),Object(k.jsx)("div",{className:"search-books-results",children:Object(k.jsx)("ol",{className:"books-grid",children:o.matchedBooks&&o.matchedBooks.length>0?o.currentBooks&&o.currentBooks.length>0&&o.currentBooks.includes({id:o.matchedBooks.map((function(e){return e.id}))})?o.currentBooks.map((function(e){return Object(k.jsx)(O,{book:e,Shelf:e.shelf,shelves:s,setBooks:c,books:r,setMounted:i,Mounted:l},e.id)})):o.matchedBooks.map((function(e){return Object(k.jsx)(O,{book:e,Shelf:"none",shelves:s,setBooks:c,books:r,setMounted:i,Mounted:l},e.id)})):Object(k.jsx)(k.Fragment,{})})})]})},N=function(e){var t,n=e.books,s=e.setBooks,c=e.setMounted,a=e.shelves,i=e.Mounted,l=Object(o.useState)(""),u=Object(r.a)(l,2),b=u[0],m=u[1],v=Object(o.useState)([{currentBooks:[n],matchedBooks:[]}]),p=Object(r.a)(v,2),O=p[0],g=p[1];Object(o.useEffect)((function(){O.currentBooks&&O.currentBooks.length<=0&&f().then((function(e){g(Object(d.a)(Object(d.a)({},O),{},{currentBooks:[e]}))}))}),[O]);return Object(k.jsx)(y,{searchQuery:b,SearchQuery:function(e){var n,o;m(e.target.value.toLowerCase().toString()),b&&""!==e.target.value?(n=b.toLowerCase().toString().trim(),o=30,fetch("".concat(h,"/search"),{method:"POST",headers:Object(d.a)(Object(d.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:n,maxResults:o})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){(t=e.length>0?e.filter((function(e){return e.title.toLowerCase().includes(b)})):[]).length>0?g(Object(d.a)(Object(d.a)({},O),{},{matchedBooks:t})):g(Object(d.a)(Object(d.a)({},O),{},{matchedBooks:[]}))})):g([])},BooksList:O,shelves:a,setBooks:s,books:n,setMounted:c,Mounted:i})},S=(n(58),function(){return Object(k.jsx)(i.a,{})}),C=function(){var e=[{name:"currentlyReading",title:"Currently Reading"},{name:"wantToRead",title:"Want to Read"},{name:"read",title:"Read"},{name:"none",title:"None"}],t=Object(o.useState)([]),n=Object(r.a)(t,2),s=n[0],c=n[1],l=Object(o.useState)(!1),u=Object(r.a)(l,2),d=u[0],h=u[1];return window.onload=function(){h(!0)},Object(o.useEffect)((function(){return!0===d&&f().then((function(e){e!==s&&c(e)})),function(){return h(!1)}}),[d,s]),Object(k.jsx)(a.a,{children:Object(k.jsx)(i.d,{children:Object(k.jsxs)(i.b,{path:"/",element:Object(k.jsx)(S,{}),children:[Object(k.jsx)(i.b,{index:!0,element:Object(k.jsx)(M,{books:s,setBooks:c,setMounted:h,Mounted:d,shelves:e})}),Object(k.jsx)(i.b,{path:"/search",element:Object(k.jsx)(N,{books:s,setBooks:c,setMounted:h,Mounted:d,shelves:e})})]})})})};c.a.render(Object(k.jsx)(C,{}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.d02ce855.chunk.js.map