(this["webpackJsonpmyreads-burham-soliman"]=this["webpackJsonpmyreads-burham-soliman"]||[]).push([[0],{26:function(e,t,o){},28:function(e,t,o){},29:function(e,t,o){"use strict";o.r(t);var n=o(0),s=o(21),c=o.n(s),r=(o(26),o(4)),a=o(9),i=o(3),l=o(6),u="https://reactnd-books-api.udacity.com",d=localStorage.token;d||(d=localStorage.token=Math.random().toString(36).substr(-8));var h={Accept:"application/json",Authorization:d},b=function(){return fetch("".concat(u,"/books"),{headers:h}).then((function(e){return e.json()})).then((function(e){return e.books}))},j=o(2),f=function(e){var t=e.book,o=e.Shelf,s=e.setBooks,c=e.books,a=e.shelves,i=e.setMounted,d=e.Mounted,f=Object(n.useState)(o),k=Object(r.a)(f,2),m=k[0],O=k[1];return Object(j.jsxs)("select",{defaultValue:o,onChange:function(e){var o=e.target.value;O(o),s((function(e){e.filter((function(e){return e.id!==t.id})).concat([t])})),function(e,t){return fetch("".concat(u,"/books/").concat(e.id),{method:"PUT",headers:Object(l.a)(Object(l.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,o).then((function(){i(!d),b().then((function(e){c!==e&&s(e)}))}))},children:[Object(j.jsxs)("option",{style:{background:"orange",fontWeight:"bold",color:"white",border:"2px solid red"},value:o,disabled:!0,children:["Move from [ ",a&&a.filter((function(e){return e.name===m})).map((function(e){var t=e.title;return t||"none"}))," ]"]}),void 0!==o?a&&a.filter((function(e){return e.name!==o})).map((function(e){var t=e.name,o=e.title;return Object(j.jsx)("option",{value:t,children:o},t)})):a&&a.filter((function(e){return"none"!==e.name})).map((function(e){var t=e.name,o=e.title;return Object(j.jsx)("option",{value:t,children:o},t)}))]})},k=function(e){var t=e.book,o=e.setBooks,n=e.books,s=e.shelves,c=e.setMounted,r=e.Mounted;return Object(j.jsxs)("li",{className:"listedBook",children:[Object(j.jsx)("span",{className:"tooltip-text",children:t.title}),Object(j.jsxs)("div",{className:"book",children:[Object(j.jsxs)("div",{className:"book-top",children:[Object(j.jsx)("div",{className:"book-cover",style:{width:"100%",height:193,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):"url(https://dummyimage.com/128x193/ff4000/fcfc7e.png&text=".concat(t.title.split(" ").join("+"),")")}}),Object(j.jsx)("div",{className:"book-shelf-changer",children:Object(j.jsx)(f,{book:t,books:n,Shelf:t.shelf?t.shelf:n.filter((function(e){return e.id===t.id})).length>0?n.filter((function(e){return e.id===t.id})).map((function(e){return e.shelf})).toString():"none",shelves:s,setBooks:o,setMounted:c,Mounted:r},t.id)})]}),Object(j.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.length>0?Object(j.jsx)("div",{className:"author-name",children:t.authors[t.authors.length-1]},t.title+t.authors[0]):Object(j.jsx)("div",{className:"author-name",children:"unknown"},t.title+"unknown")})]})]},t.id)},m=function(e){var t=e.Shelf,o=e.shelves,n=e.books,s=e.setBooks,c=e.setMounted,r=e.Mounted;return Object(j.jsxs)("div",{className:"bookshelf",children:[Object(j.jsx)("h2",{className:"bookshelf-title",children:o.filter((function(e){return e.name===t.name})).map((function(e){return e.title}))}),Object(j.jsx)("div",{className:"bookshelf-books",children:Object(j.jsx)("ol",{className:"books-grid",children:n.filter((function(e){return e.shelf===t.name})).length>0?n.filter((function(e){return e.shelf===t.name})).map((function(e){return Object(j.jsx)(k,{book:e,Shelf:e.shelf,books:n,setBooks:s,shelves:o,setMounted:c,Mounted:r},e.id)})):Object(j.jsxs)("h3",{children:[Object(j.jsx)("span",{style:{color:"red",textDecoration:"underline"},children:n.filter((function(e){return e.shelf===t.name})).length})," Books found in this shelf."]})})})]},t)},O=function(e){var t=e.Mounted,o=e.setMounted,n=e.books,s=e.shelves,c=e.setBooks;return Object(j.jsxs)("div",{className:"list-books",children:[Object(j.jsx)("div",{className:"list-books-title",children:Object(j.jsx)("h1",{children:"MyReads"})}),Object(j.jsx)("div",{className:"list-books-content",children:Object(j.jsx)("div",{children:s.filter((function(e){return"none"!==e.name})).map((function(e){return Object(j.jsx)(m,{Mounted:t,setMounted:o,books:n,shelves:s,Shelf:e,setBooks:c},e.name)}))})}),Object(j.jsx)("div",{className:"open-search",children:Object(j.jsx)(a.b,{to:"/search",children:"Add a book"})})]})},x=function(e){var t=e.shelves,o=e.books,n=e.setBooks,s=e.setMounted,c=e.Mounted;return Object(j.jsx)(O,{Mounted:c,setMounted:s,books:o,shelves:t,setBooks:n})},v=function(e){var t=e.searchQuery,o=e.SearchQuery,n=e.BooksList,s=e.shelves,c=e.setBooks,r=e.books,i=e.setMounted,l=e.Mounted;return Object(j.jsxs)("div",{className:"search-books",children:[Object(j.jsxs)("div",{className:"search-books-bar",children:[Object(j.jsx)(a.b,{to:"/",className:"close-search",children:"Close"}),Object(j.jsx)("div",{className:"search-books-input-wrapper",children:Object(j.jsx)("input",{type:"text",placeholder:"Type Book name here",value:t,onChange:o})})]}),t.length>0&&n.matchedBooks?Object(j.jsxs)("div",{className:"searchbar-tip",children:[Object(j.jsxs)("span",{style:{color:n.matchedBooks.length>0?"green":"maroon",textDecoration:"underline",margin:"0px 5px"},children:[n.matchedBooks.length," "]})," Books has been found."]}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)("div",{className:"search-books-results",children:Object(j.jsx)("ol",{className:"books-grid",children:n.matchedBooks&&n.matchedBooks.length>0?n.currentBooks&&n.currentBooks.length>0&&n.currentBooks.includes({id:n.matchedBooks.map((function(e){return e.id}))})?n.currentBooks.map((function(e){return Object(j.jsx)(k,{book:e,Shelf:e.shelf,shelves:s,setBooks:c,books:r,setMounted:i,Mounted:l},e.id)})):n.matchedBooks.map((function(e){return Object(j.jsx)(k,{book:e,Shelf:"none",shelves:s,setBooks:c,books:r,setMounted:i,Mounted:l},e.id)})):Object(j.jsx)(j.Fragment,{})})})]})},g=function(e){var t,o=e.books,s=e.setBooks,c=e.setMounted,a=e.shelves,i=e.Mounted,d=Object(n.useState)(""),f=Object(r.a)(d,2),k=f[0],m=f[1],O=Object(n.useState)([{currentBooks:[o],matchedBooks:[]}]),x=Object(r.a)(O,2),g=x[0],p=x[1];Object(n.useEffect)((function(){g.currentBooks&&g.currentBooks.length<=0&&b().then((function(e){p(Object(l.a)(Object(l.a)({},g),{},{currentBooks:[e]}))}))}),[g]);return Object(j.jsx)(v,{searchQuery:k,SearchQuery:function(e){var o,n;m(e.target.value.toLowerCase().toString()),k&&""!==e.target.value?(o=k.toLowerCase().toString().trim(),n=30,fetch("".concat(u,"/search"),{method:"POST",headers:Object(l.a)(Object(l.a)({},h),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:o,maxResults:n})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){(t=e.length>0?e.filter((function(e){return e.title.toLowerCase().includes(k)})):[]).length>0?p(Object(l.a)(Object(l.a)({},g),{},{matchedBooks:t})):p(Object(l.a)(Object(l.a)({},g),{},{matchedBooks:[]}))})):p([])},BooksList:g,shelves:a,setBooks:s,books:o,setMounted:c,Mounted:i})},p=(o(28),function(){return Object(j.jsx)(i.a,{})}),B=function(){var e=[{name:"currentlyReading",title:"Currently Reading"},{name:"wantToRead",title:"Want to Read"},{name:"read",title:"Read"},{name:"none",title:"None"}],t=Object(n.useState)([]),o=Object(r.a)(t,2),s=o[0],c=o[1],l=Object(n.useState)(!1),u=Object(r.a)(l,2),d=u[0],h=u[1];window.onload=function(){h(!0)},Object(n.useEffect)((function(){return!0===d&&b().then((function(e){e!==s&&c(e)})),function(){return h(!1)}}),[d,s]);var f=!0===d?"lightgreen":"red";return console.log("%cMounted:%c %c"+d,"font-weight:bold;background:navy;color:white","color:white","text-decoration:underline;color:"+f),Object(j.jsx)(a.a,{children:Object(j.jsx)(i.d,{children:Object(j.jsxs)(i.b,{path:"/",element:Object(j.jsx)(p,{}),children:[Object(j.jsx)(i.b,{index:!0,element:Object(j.jsx)(x,{books:s,setBooks:c,setMounted:h,Mounted:d,shelves:e})}),Object(j.jsx)(i.b,{path:"/search",element:Object(j.jsx)(g,{books:s,setBooks:c,setMounted:h,Mounted:d,shelves:e})})]})})})};c.a.render(Object(j.jsx)(B,{}),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.dc3edd83.chunk.js.map