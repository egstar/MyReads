(this["webpackJsonpmyreads-burham-soliman"]=this["webpackJsonpmyreads-burham-soliman"]||[]).push([[0],{31:function(e,t,o){},46:function(e,t,o){},47:function(e,t,o){"use strict";o.r(t);var n=o(0),s=o(25),c=o.n(s),r=(o(31),o(4)),i=o(9),a=o(3),l=o(14),u=o.n(l),d=o(6),h="https://reactnd-books-api.udacity.com",b=localStorage.token;b||(b=localStorage.token=Math.random().toString(36).substr(-8));var j={Accept:"application/json",Authorization:b},m=function(){return fetch("".concat(h,"/books"),{headers:j}).then((function(e){return e.json()})).then((function(e){return e.books}))},f=o(2),k=u.a.mixin({showConfirmButton:!1,timer:5e3,background:"linear-gradient(rgb(243, 191, 148),rgb(243, 221, 174),rgb(243, 191, 148))",timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",u.a.stopTimer),e.addEventListener("mouseleave",u.a.resumeTimer)}}),v=function(e){var t=e.book,o=e.Shelf,s=e.setBooks,c=e.books,i=e.shelves,a=e.setMounted,l=e.Mounted,u=Object(n.useState)(o),b=Object(r.a)(u,2),v=b[0],O=b[1];return Object(f.jsxs)("select",{defaultValue:o,onChange:function(e){var n=e.target.value;O(n),t.shelf=n,o!==n?k.fire({title:"Success",icon:"success",html:"".concat(t.title," has been moved from <i> ").concat(o," </i> to <sup> ").concat(n," </sup>"),showConfirmButton:!1,timer:1500}):k.fire({title:"Error",icon:"error",html:"".concat(t.title," is currently on ").concat(n," shelf")}),s((function(e){return e.filter((function(e){return e.id!==t.id})).concat([t])})),function(e,t){return fetch("".concat(h,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)(Object(d.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(t,n).then((function(){m().then((function(e){c!==e&&(s(e),a(!l))}))}))},children:[Object(f.jsxs)("option",{style:{background:"orange",fontWeight:"bold",color:"white",border:"2px solid red"},value:o,disabled:!0,children:["Move from [ ",i&&i.filter((function(e){return e.name===v})).map((function(e){var t=e.title;return t||"none"}))," ]"]}),void 0!==o?i&&i.filter((function(e){return e.name!==o})).map((function(e){var t=e.name,o=e.title;return Object(f.jsx)("option",{value:t,children:o},t)})):i&&i.filter((function(e){return"none"!==e.name})).map((function(e){var t=e.name,o=e.title;return Object(f.jsx)("option",{value:t,children:o},t)}))]})},O=function(e){var t=e.book,o=e.setBooks,n=e.books,s=e.shelves,c=e.setMounted,r=e.Mounted,i=e.BookView;return Object(f.jsxs)("li",{className:"listedBook",children:[Object(f.jsx)("span",{className:"tooltip-text",children:t.title}),Object(f.jsxs)("div",{className:"book",children:[Object(f.jsxs)("div",{className:"book-top",children:[Object(f.jsx)("div",{className:"book-cover",onClick:function(){return i(t)},style:{width:"100%",height:193,backgroundImage:t.imageLinks?"url(".concat(t.imageLinks.thumbnail,")"):"url(https://dummyimage.com/128x193/ff4000/fcfc7e.png&text=".concat(t.title.split(" ").join("+"),")")}}),Object(f.jsx)("div",{className:"book-shelf-changer",children:Object(f.jsx)(v,{book:t,books:n,Shelf:t.shelf?t.shelf:n.filter((function(e){return e.id===t.id})).length>0?n.filter((function(e){return e.id===t.id})).map((function(e){return e.shelf})).toString():"none",shelves:s,setBooks:o,setMounted:c,Mounted:r},t.id)})]}),Object(f.jsx)("div",{className:"book-authors",children:t.authors&&t.authors.length>0?Object(f.jsx)("div",{className:"author-name",children:t.authors[t.authors.length-1]},t.title+t.authors[0]):Object(f.jsx)("div",{className:"author-name",children:"Unknown"},t.title+"Unknown")})]})]},t.id)},p=function(e){var t=e.book,o=e.setBooks,n=e.books,s=e.shelves,c=e.setMounted,r=e.Mounted,i=t.imageLinks?t.imageLinks.thumbnail:"https://dummyimage.com/128x193/ff4000/fcfc7e.png&text=".concat(t.title.split(" ").join("+"));return Object(f.jsx)(O,{BookView:function(e){u.a.mixin({showCloseButton:!0,background:"linear-gradient(rgb(243, 191, 148),rgb(243, 221, 174),rgb(243, 191, 148))",html:'<div class="book-view-grid">\n                    <div class="book-view-pic">\n                        <img class="book-displied-pic" src='.concat(i," alt=").concat(e.title,' />\n                    </div>\n                    <div class="book-view-pages">Number of pages: <span class="book-view-pagecount">').concat(e.pageCount,'</span></div>\n                    <hr style="opacity:0.1;">\n                    <div class="book-view-desc">Description</div>\n                    <div class="book-view-descval">').concat(e.description,'</div>\n                    <hr style="opacity:0.1;">\n                    <div class="book-view-authors">Authors: <span class="book-view-authval">').concat(e.authors?e.authors.map((function(e){return'<h5 style="width:max-content;display:inline">'+e+"</h5>"})).toString().replaceAll(",","  "):"Unknown","</span></div>\n                    \n                    \n                </div>"),showConfirmButton:!1}).fire({title:"".concat(e.title)})},book:t,setBooks:o,books:n,shelves:s,setMounted:c,Mounted:r})},x=function(e){var t=e.Shelf,o=e.shelves,n=e.books,s=e.setBooks,c=e.setMounted,r=e.Mounted;return Object(f.jsxs)("div",{className:"bookshelf",children:[Object(f.jsx)("h2",{className:"bookshelf-title",children:o.filter((function(e){return e.name===t.name})).map((function(e){return e.title}))}),Object(f.jsx)("div",{className:"bookshelf-books",children:Object(f.jsx)("ol",{className:"books-grid",children:n.filter((function(e){return e.shelf===t.name})).length>0?n.filter((function(e){return e.shelf===t.name})).map((function(e){return Object(f.jsx)(p,{book:e,Shelf:e.shelf,books:n,setBooks:s,shelves:o,setMounted:c,Mounted:r},e.id)})):Object(f.jsxs)("h3",{children:[Object(f.jsx)("span",{style:{color:"red",textDecoration:"underline"},children:n.filter((function(e){return e.shelf===t.name})).length})," Books found in this shelf."]})})})]},t)},g=function(e){var t=e.Mounted,o=e.setMounted,n=e.books,s=e.shelves,c=e.setBooks;return Object(f.jsxs)("div",{className:"list-books",children:[Object(f.jsx)("div",{className:"list-books-title",children:Object(f.jsx)("h1",{children:"MyReads"})}),Object(f.jsx)("div",{className:"list-books-content",children:Object(f.jsx)("div",{children:s.filter((function(e){return"none"!==e.name})).map((function(e){return Object(f.jsx)(x,{Mounted:t,setMounted:o,books:n,shelves:s,Shelf:e,setBooks:c},e.name)}))})}),Object(f.jsx)("div",{className:"open-search",children:Object(f.jsx)(i.b,{to:"/search",children:"Add a book"})})]})},B=function(e){var t=e.shelves,o=e.books,n=e.setBooks,s=e.setMounted,c=e.Mounted;return Object(f.jsx)(g,{Mounted:c,setMounted:s,books:o,shelves:t,setBooks:n})},M=o(26),y=function(e){var t=e.searchQuery,o=e.SearchQuery,n=e.BooksList,s=e.shelves,c=e.setBooks,r=e.books,a=e.setMounted,l=e.Mounted;return Object(f.jsxs)("div",{className:"search-books",children:[Object(f.jsxs)("div",{className:"search-books-bar",children:[Object(f.jsx)(i.b,{to:"/",className:"close-search",children:"Close"}),Object(f.jsx)("div",{className:"search-books-input-wrapper",children:Object(f.jsx)(M.DebounceInput,{minLength:2,debounceTimeout:250,element:"input",type:"text",placeholder:"Type Book name here",onChange:o})})]}),t.length>0&&n.matchedBooks?Object(f.jsxs)("div",{className:"searchbar-tip",children:[Object(f.jsxs)("span",{style:{color:n.matchedBooks.length>0?"green":"maroon",textDecoration:"underline",margin:"0px 5px"},children:[n.matchedBooks.length," "]})," Books has been found."]}):Object(f.jsx)(f.Fragment,{}),Object(f.jsx)("div",{className:"search-books-results",children:Object(f.jsx)("ol",{className:"books-grid",children:n.matchedBooks&&n.matchedBooks.length>0?n.currentBooks&&n.currentBooks.length>0&&n.currentBooks.includes({id:n.matchedBooks.map((function(e){return e.id}))})?n.currentBooks.map((function(e){return Object(f.jsx)(p,{book:e,Shelf:e.shelf,shelves:s,setBooks:c,books:r,setMounted:a,Mounted:l},e.id)})):n.matchedBooks.map((function(e){return Object(f.jsx)(p,{book:e,Shelf:"none",shelves:s,setBooks:c,books:r,setMounted:a,Mounted:l},e.id)})):Object(f.jsx)(f.Fragment,{})})})]})},w=function(e){var t,o=e.books,s=e.setBooks,c=e.setMounted,i=e.shelves,a=e.Mounted,l=Object(n.useState)(""),u=Object(r.a)(l,2),b=u[0],k=u[1],v=Object(n.useState)([{currentBooks:[o],matchedBooks:[]}]),O=Object(r.a)(v,2),p=O[0],x=O[1];Object(n.useEffect)((function(){p.currentBooks&&p.currentBooks.length<=0&&m().then((function(e){x(Object(d.a)(Object(d.a)({},p),{},{currentBooks:[e]}))}))}),[p]);return Object(f.jsx)(y,{searchQuery:b,SearchQuery:function(e){var o,n;k(e.target.value.toLowerCase().toString()),b&&""!==e.target.value?(o=b.toLowerCase().toString().trim(),n=30,fetch("".concat(h,"/search"),{method:"POST",headers:Object(d.a)(Object(d.a)({},j),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:o,maxResults:n})}).then((function(e){return e.json()})).then((function(e){return e.books}))).then((function(e){(t=e.length>0?e.filter((function(e){return e.title.toLowerCase().includes(b)})):[]).length>0?x(Object(d.a)(Object(d.a)({},p),{},{matchedBooks:t})):x(Object(d.a)(Object(d.a)({},p),{},{matchedBooks:[]}))})):x([])},BooksList:p,shelves:i,setBooks:s,books:o,setMounted:c,Mounted:a})},N=(o(46),function(){return Object(f.jsx)(a.a,{})}),S=function(){var e=[{name:"currentlyReading",title:"Currently Reading"},{name:"wantToRead",title:"Want to Read"},{name:"read",title:"Read"},{name:"none",title:"None"}],t=Object(n.useState)([]),o=Object(r.a)(t,2),s=o[0],c=o[1],l=Object(n.useState)(!1),u=Object(r.a)(l,2),d=u[0],h=u[1];return window.onload=function(){h(!0)},Object(n.useEffect)((function(){return!0===d&&m().then((function(e){e!==s&&c(e)})),function(){return h(!1)}}),[d,s]),Object(f.jsx)(i.a,{children:Object(f.jsx)(a.d,{children:Object(f.jsxs)(a.b,{path:"/",element:Object(f.jsx)(N,{}),children:[Object(f.jsx)(a.b,{index:!0,element:Object(f.jsx)(B,{books:s,setBooks:c,setMounted:h,Mounted:d,shelves:e})}),Object(f.jsx)(a.b,{path:"/search",element:Object(f.jsx)(w,{books:s,setBooks:c,setMounted:h,Mounted:d,shelves:e})})]})})})};c.a.render(Object(f.jsx)(S,{}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.535da670.chunk.js.map